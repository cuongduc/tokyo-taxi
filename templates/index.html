<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="initial-scale=1.0">
	<title>Shortest path</title>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	<style>
		#map {
			display: block;
			width: 	100%;
			height: 100%;
			position: fixed;
			top: 0;
			bottom: 0;
			right: 0;
			left: 0;
		}
	</style>
</head>
<body>
	<div id="map">
	</div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAZvsz4xVC_W_xSnw9jFuygggEl8DwHrb0&callback=initMap" async defer></script>
	<script>
		var container = document.getElementById('map')
		var map;
		var initialRoutesCoordinates = [];
		var initPath = null;

		function initMap() {
			map = new google.maps.Map(container, {
				center: {lat: 35.409200000000006, lng: 139.0},
				zoom: 12,
				mapTypeId: google.maps.MapTypeId.ROADMAP
			});
		}

		/**
		 * Fit the map to full width and height of the
		 * browser's content window
		 */
		function fitMap() {
			var w = window.innerWidth;
			var h = window.innerHeight;

			container.style.width = (w - 1) + 'px';
			container.style.height = (h - 1) + 'px';
		}

		$(document).ready(function() {
			var getMapData = function() {
				var url = 'getMapData';
				$.ajax({
					url: url,
					type: 'POST'
				})
				.success(function(response) {
					for (var i = 0; i < response.data.length; i++) {
						// var pathCoordinates = [response.data[i]];
						// var linePath = new google.maps.Polyline({
						// 	path: pathCoordinates,
						// 	geodesic: true,
						//     strokeColor: '#FF0000',
						//     strokeOpacity: 1.0,
						//     strokeWeight: 1
						// });

						// linePath.setMap(map);
						initialRoutesCoordinates[i] = response.data[i];
					}

					initPath = new google.maps.Polyline({
						path: initialRoutesCoordinates,
						geodesic: true,
					    strokeColor: '#FF0000',
					    strokeOpacity: 1.0,
					    strokeWeight: 1
					});

					initPath.setMap(map);
				})
				.error(function(response) {
					console.log('error', response);
				});
			}

			fitMap();
			getMapData();
			$(window).resize(function() {
				fitMap();
			})
		});
	</script>
</body>
</html>